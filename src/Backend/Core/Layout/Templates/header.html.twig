{% import "Layout/Templates/macros.html.twig" as macro %}
{% include "Layout/Templates/messaging.html.twig" %}

<div class="header">
  <div class="site-info">
    <div class="site-icon-block">
      <img class="site-icon" src="/apple-touch-icon.png" alt="Fork CMS logo">
      {% if debug %}
        <div class="debug-mode">{{ 'lbl.DebugMode'|trans|uppercase }}</div>
      {% endif %}
    </div>
    <div class="site-text">
      <p class="site-title">{{ SITE_TITLE }}
        <a class="site-url" data-url="{{ SITE_URL }}{{ prefixURL }}" href="{{ SITE_URL }}{{ prefixURL }}" target="_blank">{{ 'lbl.VisitWebsite'|trans|ucfirst }}</a>
      </p>
      {% if SITE_MULTILANGUAGE %}
        <div class="nav navbar-nav navbar-languages">
          {% if workingLanguages %}
            <span class="working-language d-none d-sm-block mr-sm-1">{{ 'msg.NowEditing'|trans|ucfirst }}</span>
            <div class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" id="navbarLanguagesDropdown">
                <span class="dropdown-text">{{ ('lbl.'~LANGUAGE|uppercase)|trans|ucfirst }}</span>
                <span class="dropdown-angle">{{ macro.icon('angle-right') }}</span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarLanguagesDropdown">
                {% for workingLanguage in workingLanguages %}
                  <a class="dropdown-item{% if workingLanguage.selected %} active{% endif %}" href="{{ geturl('',null,null,workingLanguage.abbr) }}">{{ ('lbl.'~workingLanguage.abbr|uppercase)|trans|ucfirst }}</a>
                {% endfor %}
              </ul>
            </div>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>

  <ul class="nav navbar-nav navbar-right navbar-user">
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" id="navbarProfileDropdown">
        <img src="{{ FRONTEND_FILES_URL }}/Users/avatars/128x128/{{ authenticatedUserAvatar }}" class="rounded-circle" alt="{{ authenticatedUserNickname }}" />
        <span class="dropdown-angle">{{ macro.icon('angle-right') }}</span>
      </a>
      <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarProfileDropdown">
        {% if authenticatedUserEditUrl %}
          <a class="dropdown-item" href="{{ authenticatedUserEditUrl }}">{{ 'lbl.EditProfile'|trans|ucfirst }}</a>
        {% endif %}
        <a class="dropdown-item" href="{{ geturl('logout','authentication') }}">{{ 'lbl.SignOut'|trans|ucfirst }}</a>
      </ul>
    </li>
  </ul>
</div>

<div id="ajaxSpinner" style="display: none;" aria-label="{{ 'lbl.Loading'|trans|ucfirst }}">
  {{ macro.icon('spinner fa-pulse fa-lg fa-fw') }}
</div>
